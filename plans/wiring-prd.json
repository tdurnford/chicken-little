{
  "project": {
    "name": "Chicken Coop Tycoon - Main Script Wiring",
    "description": "Work items to wire up all implemented modules into Main.client.lua and Main.server.lua, creating the complete game loop and connecting all systems together.",
    "prerequisite": "All individual modules have been implemented per the original PRD. This PRD focuses solely on integration and wiring."
  },
  "workItems": [
    {
      "id": 1,
      "category": "Server-Core",
      "title": "Wire Up Data Persistence System",
      "description": "Initialize the DataPersistence module in Main.server.lua to handle player data saving/loading on join/leave.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Require DataPersistence module",
        "Call DataPersistence.start() to initialize DataStore, player connections, and auto-save",
        "Log successful initialization"
      ],
      "acceptanceCriteria": [
        "DataPersistence.start() is called on server start",
        "Player data loads when players join",
        "Player data saves when players leave",
        "Auto-save runs periodically"
      ],
      "dependencies": [],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 2,
      "category": "Server-Core",
      "title": "Wire Up Map Generation System",
      "description": "Initialize the MapGeneration module to create 12 player sections and assign sections to players on join.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Require MapGeneration module",
        "Create mapState using MapGeneration.createMapState()",
        "Call MapGeneration.generateSections() to create section templates",
        "Wire handlePlayerJoin to assign sections on player join",
        "Wire handlePlayerLeave to reserve sections on player leave"
      ],
      "acceptanceCriteria": [
        "12 sections are generated on server start",
        "Players are assigned sections on join",
        "Sections are reserved for rejoining players",
        "Map state is properly managed"
      ],
      "dependencies": [
        1
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 3,
      "category": "Server-Core",
      "title": "Create RemoteEvents and RemoteFunctions",
      "description": "Set up all RemoteEvents and RemoteFunctions needed for client-server communication.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Create ReplicatedStorage/Remotes folder",
        "Create RemoteEvents: PlayerDataChanged, ChickenPlaced, ChickenPickedUp, ChickenSold, EggHatched, MoneyCollected, TrapPlaced, TrapCaught, PredatorSpawned, PredatorDefeated, LockActivated, TradeRequested, TradeUpdated, TradeCompleted, RandomChickenSpawned, RandomChickenClaimed, AlertTriggered",
        "Create RemoteFunctions: GetPlayerData, PlaceChicken, PickupChicken, SellChicken, HatchEgg, CollectMoney, BuyEgg, BuyTrap, PlaceTrap, ActivateLock, UpgradeCage, RequestTrade, AcceptTrade, AddToTrade, ConfirmTrade, CancelTrade, ClaimRandomChicken, SwingBat, StealChicken"
      ],
      "acceptanceCriteria": [
        "All RemoteEvents are created in Remotes folder",
        "All RemoteFunctions are created in Remotes folder",
        "Remotes are accessible from client and server"
      ],
      "dependencies": [],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 4,
      "category": "Server-Gameplay",
      "title": "Wire Up Chicken Placement Server Handlers",
      "description": "Connect RemoteFunctions for chicken placement operations to ChickenPlacement module.",
      "completed": true,
      "priority": "high",
      "steps": [
        "Require ChickenPlacement module",
        "Handle PlaceChicken RemoteFunction - validate and place chicken from inventory",
        "Handle PickupChicken RemoteFunction - validate ownership and pickup",
        "Fire ChickenPlaced/ChickenPickedUp events to update all clients",
        "Update player data after operations"
      ],
      "acceptanceCriteria": [
        "Players can place chickens from inventory via RemoteFunction",
        "Players can pickup their own chickens",
        "Placement validates spot availability",
        "All clients receive placement updates"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 5,
      "category": "Server-Gameplay",
      "title": "Wire Up Egg Hatching Server Handlers",
      "description": "Connect RemoteFunctions for egg hatching operations to EggHatching module.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require EggHatching module",
        "Handle HatchEgg RemoteFunction - validate egg ownership, perform hatch",
        "Use EggHatching.hatch() to determine chicken outcome",
        "Add hatched chicken to player's coop if spot available, otherwise inventory",
        "Fire EggHatched event with result to player"
      ],
      "acceptanceCriteria": [
        "Players can hatch eggs they own",
        "Hatching uses weighted probability for chicken type",
        "Hatched chicken is added to coop or inventory",
        "Player receives notification of hatch result"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 6,
      "category": "Server-Gameplay",
      "title": "Wire Up Money Collection Server Handlers",
      "description": "Connect money collection system to update player money when collecting from chickens.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require MoneyCollection module",
        "Handle CollectMoney RemoteFunction - validate chicken ownership",
        "Use MoneyCollection.collect() or MoneyCollection.collectAll()",
        "Apply MoneyScaling multipliers to collected amount",
        "Fire MoneyCollected event to update client HUD"
      ],
      "acceptanceCriteria": [
        "Players can collect money from their chickens",
        "Money collection applies scaling multipliers",
        "Player data money is updated",
        "Client HUD updates with new money amount"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 7,
      "category": "Server-Gameplay",
      "title": "Wire Up Chicken Money Generation Loop",
      "description": "Create server-side loop to update chicken accumulated money over time.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require Chicken module",
        "Create Heartbeat connection for money generation",
        "For each player, update all placed chickens using Chicken:update()",
        "Track accumulated money on each chicken",
        "Periodically sync accumulated money to clients"
      ],
      "acceptanceCriteria": [
        "Chickens accumulate money over time based on config",
        "Money generation uses correct rates per chicken type",
        "Accumulated money persists until collected",
        "Clients can see accumulated money on chickens"
      ],
      "dependencies": [
        1,
        4
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 8,
      "category": "Server-Gameplay",
      "title": "Wire Up Egg Laying System",
      "description": "Create server-side system for chickens to lay eggs at intervals.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Use Chicken class to track egg laying timers",
        "Check Chicken:canLayEgg() in game loop",
        "Call Chicken:layEgg() when timer expires",
        "Add egg to player's inventory based on chicken's egg types",
        "Fire event to client for egg laid notification"
      ],
      "acceptanceCriteria": [
        "Chickens lay eggs at intervals defined in config",
        "Eggs are added to player inventory",
        "Egg type matches chicken's possible egg types",
        "Players are notified when eggs are laid"
      ],
      "dependencies": [
        1,
        7
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 9,
      "category": "Server-Gameplay",
      "title": "Wire Up Store Server Handlers",
      "description": "Connect store buying and selling operations to Store module.",
      "completed": true,
      "priority": "high",
      "steps": [
        "Require Store module",
        "Handle BuyEgg RemoteFunction - validate money, use Store.buyEgg()",
        "Handle SellChicken RemoteFunction - use Store.sellChicken()",
        "Handle SellEgg RemoteFunction if needed",
        "Fire PlayerDataChanged event after transactions"
      ],
      "acceptanceCriteria": [
        "Players can buy eggs if they have enough money",
        "Players can sell chickens for money",
        "Prices match configuration",
        "Player data updates after transactions"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 10,
      "category": "Server-Gameplay",
      "title": "Wire Up Trap Placement Server Handlers",
      "description": "Connect trap placement and management to TrapPlacement module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require TrapPlacement module",
        "Handle BuyTrap RemoteFunction - validate money and placement limits",
        "Handle PlaceTrap RemoteFunction - use TrapPlacement.placeTrap()",
        "Fire TrapPlaced event to update clients",
        "Update player data with new trap"
      ],
      "acceptanceCriteria": [
        "Players can buy and place traps",
        "Placement respects max trap limits",
        "Traps appear in player's coop area",
        "Trap state is saved in player data"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 11,
      "category": "Server-Gameplay",
      "title": "Wire Up Predator Spawning System",
      "description": "Initialize predator spawning loop using PredatorSpawning module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require PredatorSpawning module",
        "Create spawn state using PredatorSpawning.createSpawnState()",
        "Create game loop to check PredatorSpawning.shouldSpawn()",
        "Spawn predators targeting player coops",
        "Fire PredatorSpawned event to clients"
      ],
      "acceptanceCriteria": [
        "Predators spawn periodically",
        "Predators target player coops",
        "Predator types are selected based on wave/probability",
        "Clients receive predator spawn notifications"
      ],
      "dependencies": [
        1,
        2
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 12,
      "category": "Server-Gameplay",
      "title": "Wire Up Predator Attack System",
      "description": "Connect predator attack behavior using PredatorAttack module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require PredatorAttack module",
        "Update predator states in game loop using PredatorAttack.updatePredatorStates()",
        "Detect when predators reach coop using hasReachedCoop()",
        "Execute attacks using PredatorAttack.executeAttack()",
        "Fire AlertTriggered event for predator alerts"
      ],
      "acceptanceCriteria": [
        "Predators attack chickens when they reach coop",
        "Players are alerted to predator attacks",
        "Chickens can be killed/stolen by predators",
        "Cage upgrades affect predator resistance"
      ],
      "dependencies": [
        11
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 13,
      "category": "Server-Gameplay",
      "title": "Wire Up Trap Catching System",
      "description": "Connect trap catching mechanics using TrapCatching module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require TrapCatching module",
        "Detect predators entering trap zones",
        "Use TrapCatching.attemptCatch() or attemptCatchWithAllTraps()",
        "Mark caught predators using TrapPlacement.setCaughtPredator()",
        "Fire TrapCaught event to clients"
      ],
      "acceptanceCriteria": [
        "Traps attempt to catch predators in their zone",
        "Catch probability depends on trap vs predator level",
        "Caught predators are stored in trap",
        "Players can sell caught predators"
      ],
      "dependencies": [
        10,
        11
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 14,
      "category": "Server-Gameplay",
      "title": "Wire Up Baseball Bat Combat",
      "description": "Connect baseball bat combat using BaseballBat module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require BaseballBat module",
        "Create bat state for each player using BaseballBat.createBatState()",
        "Handle SwingBat RemoteFunction - validate swing timing",
        "Use BaseballBat.hitPredator() or BaseballBat.hitPlayer()",
        "Apply damage to predators, knockback to players",
        "Fire PredatorDefeated event when predator killed"
      ],
      "acceptanceCriteria": [
        "Players can swing bat with cooldown",
        "Bat hits can defeat predators",
        "Bat hits knock back other players",
        "Multiple hits may be needed for stronger predators"
      ],
      "dependencies": [
        3,
        11
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 15,
      "category": "Server-Gameplay",
      "title": "Wire Up Cage Locking System",
      "description": "Connect cage locking using CageLocking module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require CageLocking module",
        "Create lock state for each player using CageLocking.createLockState()",
        "Handle ActivateLock RemoteFunction - validate cooldown",
        "Use CageLocking.activateLock() with tier-based duration",
        "Update lock states in game loop using CageLocking.update()",
        "Fire LockActivated event to update clients"
      ],
      "acceptanceCriteria": [
        "Players can lock their cage for limited duration",
        "Lock duration depends on cage upgrade tier",
        "Lock has cooldown between uses",
        "Locked cages block entry from other players"
      ],
      "dependencies": [
        3,
        16
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 16,
      "category": "Server-Gameplay",
      "title": "Wire Up Cage Upgrade System",
      "description": "Connect cage upgrades using CageUpgrades module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require CageUpgrades module",
        "Handle UpgradeCage RemoteFunction - validate money and current tier",
        "Use CageUpgrades.purchaseUpgrade() to upgrade",
        "Update player data with new cage tier",
        "Fire PlayerDataChanged event with updated data"
      ],
      "acceptanceCriteria": [
        "Players can purchase cage upgrades with money",
        "Upgrades increase lock duration and predator resistance",
        "Upgrade prices scale with tier",
        "Max tier is enforced"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 17,
      "category": "Server-Gameplay",
      "title": "Wire Up Chicken Stealing System",
      "description": "Connect chicken stealing using ChickenStealing module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require ChickenStealing module",
        "Create steal state for each player using ChickenStealing.createStealState()",
        "Handle StealChicken RemoteFunction - validate target coop not locked",
        "Use ChickenStealing.startSteal() to begin steal attempt",
        "Update steal progress in game loop",
        "Complete steal using ChickenStealing.completeSteal()"
      ],
      "acceptanceCriteria": [
        "Players can steal from unlocked coops",
        "Stealing takes time and can be interrupted",
        "Stolen chickens transfer to thief's inventory",
        "Locked coops block stealing"
      ],
      "dependencies": [
        3,
        15
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 18,
      "category": "Server-Gameplay",
      "title": "Wire Up Random Chicken Spawn Events",
      "description": "Initialize random chicken spawn events using RandomChickenSpawn module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require RandomChickenSpawn module",
        "Create spawn state using RandomChickenSpawn.createSpawnState()",
        "Update spawn system in game loop using RandomChickenSpawn.update()",
        "Fire RandomChickenSpawned event when chicken spawns",
        "Handle ClaimRandomChicken RemoteFunction for claiming",
        "Fire RandomChickenClaimed event on successful claim"
      ],
      "acceptanceCriteria": [
        "Rare chickens spawn periodically in neutral zone",
        "All players are notified of spawn",
        "First player to claim gets the chicken",
        "Chicken despawns if not claimed in time"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 19,
      "category": "Server-Gameplay",
      "title": "Wire Up Trading System",
      "description": "Connect trading using TradeExchange module.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require TradeExchange module",
        "Handle RequestTrade RemoteFunction - create trade session",
        "Handle AcceptTrade RemoteFunction - accept trade request",
        "Handle AddToTrade/RemoveFromTrade RemoteFunctions - modify offers",
        "Handle ConfirmTrade RemoteFunction - confirm and execute trade",
        "Handle CancelTrade RemoteFunction - cancel session",
        "Fire TradeRequested, TradeUpdated, TradeCompleted events"
      ],
      "acceptanceCriteria": [
        "Players can request trades with each other",
        "Both players can add/remove items from offer",
        "Both must confirm to complete trade",
        "Items transfer correctly on completion"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 20,
      "category": "Server-Gameplay",
      "title": "Wire Up Offline Earnings on Join",
      "description": "Apply offline earnings when players rejoin using OfflineEarnings module.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require OfflineEarnings module",
        "After loading player data, check hasEarnings()",
        "Calculate earnings using OfflineEarnings.calculate()",
        "Apply earnings using OfflineEarnings.apply()",
        "Send earnings preview to client for UI display"
      ],
      "acceptanceCriteria": [
        "Offline money is calculated on rejoin",
        "Offline eggs are added to inventory",
        "Caps prevent excessive offline gains",
        "Client receives earnings summary for UI"
      ],
      "dependencies": [
        1
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 21,
      "category": "Server-Core",
      "title": "Create Main Server Game Loop",
      "description": "Set up the main game loop using RunService.Heartbeat to update all systems.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Create Heartbeat connection in Main.server.lua",
        "Update chicken money generation for all players",
        "Update egg laying timers for all chickens",
        "Update predator spawning and movement",
        "Update predator attack states",
        "Update cage lock states",
        "Update steal progress states",
        "Update random chicken spawn events",
        "Cleanup inactive predators periodically"
      ],
      "acceptanceCriteria": [
        "All time-based systems update smoothly",
        "Game loop runs efficiently for 12 players",
        "State updates are synced to clients",
        "No memory leaks or excessive CPU usage"
      ],
      "dependencies": [
        7,
        8,
        11,
        12,
        15,
        17,
        18
      ],
      "codeLocation": "src/server/Main.server.lua",
      "status": "complete",
      "completedAt": "2026-01-13"
    },
    {
      "id": 22,
      "category": "Client-Core",
      "title": "Wire Up Client RemoteEvent Listeners",
      "description": "Set up listeners for all RemoteEvents from server in Main.client.lua.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Get Remotes folder from ReplicatedStorage",
        "Connect to PlayerDataChanged - update local player data cache",
        "Connect to ChickenPlaced/ChickenPickedUp - update visuals",
        "Connect to EggHatched - show hatch result",
        "Connect to MoneyCollected - play effects",
        "Connect to PredatorSpawned/PredatorDefeated - update predator visuals",
        "Connect to TrapCaught - update trap visuals",
        "Connect to LockActivated - update lock indicator",
        "Connect to Trade events - update trade UI",
        "Connect to RandomChicken events - show notifications",
        "Connect to AlertTriggered - play alert sounds"
      ],
      "acceptanceCriteria": [
        "Client responds to all server events",
        "Local state stays in sync with server",
        "Visual and audio feedback plays correctly"
      ],
      "dependencies": [
        3
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 23,
      "category": "Client-Core",
      "title": "Wire Up Sound Effects System",
      "description": "Initialize SoundEffects module and connect to game events.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require SoundEffects module",
        "Call SoundEffects.initialize()",
        "Connect money collection to playMoneyCollect()",
        "Connect egg hatching to playEggHatch()",
        "Connect bat swing to playBatSwing()",
        "Connect predator alerts to playPredatorAlert()"
      ],
      "acceptanceCriteria": [
        "All major actions have sound effects",
        "Sounds play at appropriate times",
        "Volume levels are balanced"
      ],
      "dependencies": [
        22
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 24,
      "category": "Client-UI",
      "title": "Wire Up Main HUD",
      "description": "Initialize MainHUD module and connect to player data updates.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Require MainHUD module",
        "Call MainHUD.create() to create HUD",
        "Request initial player data from server",
        "Call MainHUD.updateFromPlayerData() on data changes",
        "Connect to PlayerDataChanged event to update money display"
      ],
      "acceptanceCriteria": [
        "Money is always visible on screen",
        "Money updates in real-time",
        "Large numbers are formatted correctly (K, M, B, T)"
      ],
      "dependencies": [
        22
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 25,
      "category": "Client-UI",
      "title": "Wire Up Inventory UI",
      "description": "Initialize InventoryUI module and connect to player data.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require InventoryUI module",
        "Call InventoryUI.create() to create UI",
        "Call InventoryUI.updateFromPlayerData() on data changes",
        "Connect item selection to placement/hatching actions",
        "Wire action buttons to server RemoteFunctions"
      ],
      "acceptanceCriteria": [
        "Inventory shows eggs and chickens",
        "Items can be selected for actions",
        "Selecting egg allows hatching",
        "Selecting chicken allows placing"
      ],
      "dependencies": [
        22,
        24
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 26,
      "category": "Client-UI",
      "title": "Wire Up Hatch Preview UI",
      "description": "Initialize HatchPreviewUI and connect to egg hatching flow.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require HatchPreviewUI module",
        "Call HatchPreviewUI.create() to create UI",
        "Connect to egg selection from inventory",
        "Show preview with HatchPreviewUI.show(eggType)",
        "Connect hatch button to HatchEgg RemoteFunction",
        "Handle hatch result display"
      ],
      "acceptanceCriteria": [
        "Selecting egg shows 3 possible chickens",
        "Probabilities are displayed",
        "Hatching triggers server request",
        "Result is shown after hatch"
      ],
      "dependencies": [
        25
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 27,
      "category": "Client-Gameplay",
      "title": "Wire Up Chicken Pickup System",
      "description": "Initialize ChickenPickup module and connect to input and server.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require ChickenPickup module",
        "Call ChickenPickup.create() with config",
        "Set up setGetNearbyChicken to detect nearby chickens",
        "Set up setGetAvailableSpot for placement detection",
        "Connect tryPickup() to E key press",
        "Connect tryPlace() to place held chicken",
        "Fire PlaceChicken/PickupChicken RemoteFunctions"
      ],
      "acceptanceCriteria": [
        "E key picks up nearby owned chicken",
        "Held chicken shows visual indicator",
        "Can place chicken in available spot",
        "Server validates and processes actions"
      ],
      "dependencies": [
        22,
        28
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 28,
      "category": "Client-Gameplay",
      "title": "Wire Up Chicken Visuals System",
      "description": "Initialize ChickenVisuals module to display chickens in coops.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require ChickenVisuals module",
        "Create chicken visuals when chickens are placed",
        "Update money indicators using ChickenVisuals.updateMoney()",
        "Play animations for laying eggs",
        "Show money pop effects on collection",
        "Destroy visuals when chickens are removed"
      ],
      "acceptanceCriteria": [
        "Chickens appear in coop when placed",
        "Chickens show accumulated money",
        "Animations play for laying and collection",
        "Rarity affects visual appearance"
      ],
      "dependencies": [
        22
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 29,
      "category": "Client-Gameplay",
      "title": "Wire Up Chicken Selling System",
      "description": "Initialize ChickenSelling module and connect to F key.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require ChickenSelling module",
        "Call ChickenSelling.create() with config",
        "Set up setGetNearbyChicken for detection",
        "Connect F key to trySell()",
        "Show confirmation UI with sell price",
        "Fire SellChicken RemoteFunction on confirm"
      ],
      "acceptanceCriteria": [
        "F key near chicken shows sell option",
        "Confirmation shows sell price",
        "Selling removes chicken and adds money",
        "Server validates ownership"
      ],
      "dependencies": [
        22,
        28
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 30,
      "category": "Client-UI",
      "title": "Wire Up Trade UI",
      "description": "Initialize TradeUI module and connect to trading system.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require TradeUI module",
        "Call TradeUI.create() to create UI",
        "Connect to TradeRequested event - show trade request",
        "Connect trade request button to RequestTrade RemoteFunction",
        "Connect TradeUpdated event - update offer displays",
        "Connect confirm/cancel buttons to server"
      ],
      "acceptanceCriteria": [
        "Players can initiate trades",
        "Trade UI shows both offers",
        "Items can be added/removed",
        "Confirmation triggers trade execution"
      ],
      "dependencies": [
        22,
        25
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 31,
      "category": "Client-UI",
      "title": "Wire Up Offline Earnings UI",
      "description": "Initialize OfflineEarningsUI to show welcome back popup.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require OfflineEarningsUI module",
        "Call OfflineEarningsUI.create() to create UI",
        "Listen for offline earnings data from server on join",
        "Show popup using OfflineEarningsUI.showFromResult()",
        "Handle claim button to dismiss and apply earnings"
      ],
      "acceptanceCriteria": [
        "Popup appears when rejoining with offline earnings",
        "Shows money and eggs earned",
        "Shows time away",
        "Claim button dismisses popup"
      ],
      "dependencies": [
        22,
        24
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 32,
      "category": "Client-UI",
      "title": "Wire Up Tutorial System",
      "description": "Initialize Tutorial module for new players.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require Tutorial module",
        "Call Tutorial.create() to create tutorial UI",
        "Check Tutorial.shouldShowTutorial() on join",
        "Start tutorial with Tutorial.start() for new players",
        "Connect step completion to game actions",
        "Mark tutorial complete in player data"
      ],
      "acceptanceCriteria": [
        "Tutorial triggers for new players",
        "Steps guide through basic mechanics",
        "Can be skipped",
        "Doesn't repeat for returning players"
      ],
      "dependencies": [
        22,
        24,
        26
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 33,
      "category": "Client-Mobile",
      "title": "Wire Up Mobile Touch Controls",
      "description": "Initialize MobileTouchControls for mobile device support.",
      "completed": false,
      "priority": "medium",
      "steps": [
        "Require MobileTouchControls module",
        "Call MobileTouchControls.create() to create UI",
        "Check MobileTouchControls.isMobile() for device detection",
        "Show contextual buttons based on nearby objects",
        "Connect touch buttons to same actions as keyboard",
        "Update button visibility based on game state"
      ],
      "acceptanceCriteria": [
        "Mobile devices show touch buttons",
        "Buttons appear contextually",
        "All keyboard actions have touch equivalents",
        "UI doesn't obstruct gameplay"
      ],
      "dependencies": [
        27,
        29
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 34,
      "category": "Client-Core",
      "title": "Create Client Input Handler",
      "description": "Set up centralized input handling for all keyboard shortcuts.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Use UserInputService or ContextActionService",
        "Bind E key to pickup/place/hatch actions",
        "Bind F key to sell action",
        "Bind Escape to cancel current action",
        "Bind number keys or hotkey for inventory toggle",
        "Check context to determine which action to perform"
      ],
      "acceptanceCriteria": [
        "E key works for pickup, place, hatch, steal",
        "F key works for selling",
        "Escape cancels actions in progress",
        "Input conflicts are handled correctly"
      ],
      "dependencies": [
        27,
        29,
        26
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 35,
      "category": "Client-Core",
      "title": "Create Client Game Loop",
      "description": "Set up client-side update loop for UI and visual updates.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Create RenderStepped or Heartbeat connection",
        "Update chicken money indicators periodically",
        "Update proximity prompts for nearby objects",
        "Update lock timer displays",
        "Update predator positions and animations",
        "Update steal progress indicator if stealing"
      ],
      "acceptanceCriteria": [
        "Visual updates are smooth",
        "Prompts appear/disappear based on proximity",
        "Timers count down accurately",
        "No frame rate issues"
      ],
      "dependencies": [
        28
      ],
      "codeLocation": "src/client/Main.client.lua"
    },
    {
      "id": 36,
      "category": "Server-Core",
      "title": "Implement Player Section Spawning",
      "description": "Spawn players in their assigned section when they join.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Require PlayerSection module",
        "After section assignment, get spawn point using PlayerSection.getSpawnPoint()",
        "Teleport player character to spawn point",
        "Set spawn location for respawning",
        "Handle character added/respawn events"
      ],
      "acceptanceCriteria": [
        "Players spawn in their assigned section",
        "Respawning returns player to their section",
        "Section assignment persists for session"
      ],
      "dependencies": [
        2
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 37,
      "category": "Server-Core",
      "title": "Implement Player Data Sync to Clients",
      "description": "Create system to sync player data changes to clients.",
      "completed": true,
      "priority": "critical",
      "steps": [
        "Create GetPlayerData RemoteFunction handler",
        "Return player's data from cache",
        "Fire PlayerDataChanged event when data changes",
        "Include relevant portion of data in event",
        "Throttle frequent updates to prevent spam"
      ],
      "acceptanceCriteria": [
        "Clients can request their player data",
        "Clients receive updates when data changes",
        "Data sync is efficient and not spammy"
      ],
      "dependencies": [
        1,
        3
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 38,
      "category": "Integration",
      "title": "Create Module Loading Utility",
      "description": "Create helper to load all shared modules and make them accessible.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Create function to require all shared modules",
        "Create table to store module references",
        "Log module loading for debugging",
        "Handle any module load failures gracefully"
      ],
      "acceptanceCriteria": [
        "All shared modules load without errors",
        "Modules are easily accessible",
        "Load failures are logged"
      ],
      "dependencies": [],
      "codeLocation": "src/server/Main.server.lua, src/client/Main.client.lua"
    },
    {
      "id": 39,
      "category": "Testing",
      "title": "Create Server Integration Test Hook",
      "description": "Set up ability to run IntegrationTests from server.",
      "completed": false,
      "priority": "low",
      "steps": [
        "Require IntegrationTests module",
        "Create command or method to trigger tests",
        "Log test results",
        "Only allow in studio/test environment"
      ],
      "acceptanceCriteria": [
        "Integration tests can be run from server",
        "Tests only run in appropriate environments",
        "Results are logged clearly"
      ],
      "dependencies": [
        21
      ],
      "codeLocation": "src/server/Main.server.lua"
    },
    {
      "id": 40,
      "category": "Client-Gameplay",
      "title": "Wire Up Store UI Integration",
      "description": "Connect inventory UI store tab to buy/sell functionality.",
      "completed": false,
      "priority": "high",
      "steps": [
        "Add store tab or button to inventory UI",
        "Show available eggs for purchase",
        "Show sell prices for items",
        "Connect buy buttons to BuyEgg RemoteFunction",
        "Connect sell buttons to appropriate sell RemoteFunctions"
      ],
      "acceptanceCriteria": [
        "Players can access store from UI",
        "Egg prices are displayed",
        "Buying deducts money and adds egg",
        "Selling adds money and removes item"
      ],
      "dependencies": [
        25
      ],
      "codeLocation": "src/client/Main.client.lua"
    }
  ],
  "categories": [
    "Server-Core",
    "Server-Gameplay",
    "Client-Core",
    "Client-UI",
    "Client-Gameplay",
    "Client-Mobile",
    "Integration",
    "Testing"
  ],
  "milestones": [
    {
      "name": "Phase 1: Core Infrastructure",
      "description": "Data persistence, remotes, and basic player join/leave flow",
      "workItemIds": [
        1,
        2,
        3,
        36,
        37,
        38
      ],
      "priority": "critical"
    },
    {
      "name": "Phase 2: Core Client UI",
      "description": "Main HUD, inventory, and essential UI elements",
      "workItemIds": [
        22,
        23,
        24,
        25,
        34
      ],
      "priority": "critical"
    },
    {
      "name": "Phase 3: Chicken Core Loop",
      "description": "Chicken placement, money generation, collection, and egg hatching",
      "workItemIds": [
        4,
        5,
        6,
        7,
        8,
        26,
        27,
        28,
        29,
        35
      ],
      "priority": "high"
    },
    {
      "name": "Phase 4: Economy",
      "description": "Store, buying, selling, and offline earnings",
      "workItemIds": [
        9,
        20,
        31,
        40
      ],
      "priority": "high"
    },
    {
      "name": "Phase 5: Defense Systems",
      "description": "Traps, predators, combat, cage locking",
      "workItemIds": [
        10,
        11,
        12,
        13,
        14,
        15,
        16
      ],
      "priority": "medium"
    },
    {
      "name": "Phase 6: Multiplayer Features",
      "description": "Stealing, trading, random chicken events",
      "workItemIds": [
        17,
        18,
        19,
        30
      ],
      "priority": "medium"
    },
    {
      "name": "Phase 7: Polish",
      "description": "Tutorial, mobile support, game loop optimization",
      "workItemIds": [
        21,
        32,
        33,
        39
      ],
      "priority": "medium"
    }
  ],
  "notes": {
    "serverModules": {
      "description": "Modules that should be initialized/managed on server",
      "list": [
        "DataPersistence - Player data management",
        "MapGeneration - Section generation and assignment",
        "ChickenPlacement - Authoritative placement logic",
        "EggHatching - Authoritative hatch logic",
        "MoneyCollection - Money transactions",
        "Store - Buy/sell transactions",
        "TrapPlacement - Trap management",
        "TrapCatching - Catch mechanics",
        "PredatorSpawning - Predator spawn management",
        "PredatorAttack - Attack execution",
        "BaseballBat - Combat validation",
        "CageLocking - Lock state management",
        "CageUpgrades - Upgrade transactions",
        "ChickenStealing - Steal validation",
        "RandomChickenSpawn - Event management",
        "TradeExchange - Trade sessions",
        "OfflineEarnings - Offline calculation"
      ]
    },
    "clientModules": {
      "description": "Modules that should be initialized on client",
      "list": [
        "MainHUD - Money display",
        "InventoryUI - Inventory management",
        "HatchPreviewUI - Hatch preview display",
        "ChickenPickup - Pickup/place input handling",
        "ChickenSelling - Sell input handling",
        "ChickenVisuals - Chicken model management",
        "TradeUI - Trading interface",
        "OfflineEarningsUI - Welcome back popup",
        "Tutorial - New player guidance",
        "MobileTouchControls - Mobile support",
        "SoundEffects - Audio feedback"
      ]
    },
    "sharedModules": {
      "description": "Configuration and utility modules used by both client and server",
      "list": [
        "ChickenConfig - Chicken type definitions",
        "EggConfig - Egg type definitions",
        "PredatorConfig - Predator type definitions",
        "TrapConfig - Trap type definitions",
        "BalanceConfig - Economy balancing",
        "MoneyScaling - Number formatting and multipliers",
        "PlayerData - Data structure definitions",
        "PlayerSection - Section geometry",
        "Util - General utilities"
      ]
    },
    "remoteEvents": [
      "PlayerDataChanged - Server notifies client of data changes",
      "ChickenPlaced - Chicken placed in coop",
      "ChickenPickedUp - Chicken removed from coop",
      "ChickenSold - Chicken sold for money",
      "EggHatched - Egg hatched with result",
      "MoneyCollected - Money collected from chicken",
      "TrapPlaced - Trap placed in coop",
      "TrapCaught - Predator caught in trap",
      "PredatorSpawned - New predator appeared",
      "PredatorDefeated - Predator killed/caught",
      "LockActivated - Cage lock state changed",
      "TradeRequested - Trade request received",
      "TradeUpdated - Trade offer changed",
      "TradeCompleted - Trade finished",
      "RandomChickenSpawned - Rare chicken appeared",
      "RandomChickenClaimed - Rare chicken claimed",
      "AlertTriggered - Alert for predator/theft"
    ],
    "remoteFunctions": [
      "GetPlayerData - Request current player data",
      "PlaceChicken - Place chicken from inventory",
      "PickupChicken - Pick up chicken from coop",
      "SellChicken - Sell chicken for money",
      "HatchEgg - Hatch egg from inventory",
      "CollectMoney - Collect from chickens",
      "BuyEgg - Purchase egg from store",
      "BuyTrap - Purchase trap from store",
      "PlaceTrap - Place trap in coop area",
      "ActivateLock - Activate cage lock",
      "UpgradeCage - Purchase cage upgrade",
      "RequestTrade - Initiate trade with player",
      "AcceptTrade - Accept trade request",
      "AddToTrade - Add item to trade offer",
      "ConfirmTrade - Confirm trade offer",
      "CancelTrade - Cancel active trade",
      "ClaimRandomChicken - Claim spawned chicken",
      "SwingBat - Swing baseball bat",
      "StealChicken - Attempt to steal chicken"
    ]
  }
}
